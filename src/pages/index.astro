---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

// Get all prompts for stats
const allPrompts = await getCollection('prompts');
const base = import.meta.env.BASE_URL;

// Count prompts by category
const categoryCounts = {
  fundraising: allPrompts.filter(p => p.data.category === 'fundraising').length,
  communications: allPrompts.filter(p => p.data.category === 'communications').length,
  programs: allPrompts.filter(p => p.data.category === 'programs').length,
  events: allPrompts.filter(p => p.data.category === 'events').length,
  board: allPrompts.filter(p => p.data.category === 'board').length,
  operations: allPrompts.filter(p => p.data.category === 'operations').length,
};
---

<BaseLayout title="Home">
  <!-- Hero Section - Simple, Resource-Style -->
  <section class="bg-white border-b border-gray-200">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
      <div class="max-w-4xl">
        <h1 class="text-5xl font-bold mb-4 text-gray-900">Nonprofit.ai</h1>
        <p class="text-2xl text-gray-700 mb-4">
          80 tested AI prompts for nonprofit professionals
        </p>
        <p class="text-lg text-gray-600 mb-8 max-w-2xl">
          Free, open-source prompt templates for fundraising, communications, programs, events, governance, and operations.
          No accounts, no paywalls, no limits.
        </p>
        <a
          href="#categories"
          class="text-teal-600 hover:text-teal-700 font-semibold text-lg"
        >
          Browse Prompts ‚Üí
        </a>
      </div>
    </div>
  </section>

  <!-- Stats Bar -->
  <section class="bg-gray-50 border-b border-gray-200">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
      <div class="flex flex-wrap justify-center gap-8 text-center">
        <div>
          <div class="text-3xl font-bold text-teal-600">{allPrompts.length}</div>
          <div class="text-sm text-gray-600">Prompts</div>
        </div>
        <div>
          <div class="text-3xl font-bold text-teal-600">6</div>
          <div class="text-sm text-gray-600">Categories</div>
        </div>
        <div>
          <div class="text-3xl font-bold text-teal-600">{allPrompts.length * 3}</div>
          <div class="text-sm text-gray-600">AI Tests</div>
        </div>
        <div>
          <div class="text-3xl font-bold text-teal-600">100%</div>
          <div class="text-sm text-gray-600">Free</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Categories - Simplified -->
  <section id="categories" class="py-16 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-3xl font-bold mb-8 text-gray-900">Browse by Category</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- Fundraising -->
        <a
          href={`${base}category/fundraising`}
          class="border border-gray-200 p-6 rounded-lg hover:border-teal-500 transition-colors"
        >
          <div class="text-3xl mb-3">üí∞</div>
          <h3 class="text-xl font-semibold mb-2 text-gray-900">Fundraising & Development</h3>
          <p class="text-gray-600 mb-2">Donor letters, appeals, grants, and stewardship</p>
          <span class="text-sm text-gray-500">{categoryCounts.fundraising} prompts</span>
        </a>

        <!-- Communications -->
        <a
          href={`${base}category/communications`}
          class="border border-gray-200 p-6 rounded-lg hover:border-teal-500 transition-colors"
        >
          <div class="text-3xl mb-3">üì¢</div>
          <h3 class="text-xl font-semibold mb-2 text-gray-900">Communications & Marketing</h3>
          <p class="text-gray-600 mb-2">Social media, newsletters, and press releases</p>
          <span class="text-sm text-gray-500">{categoryCounts.communications} prompts</span>
        </a>

        <!-- Programs -->
        <a
          href={`${base}category/programs`}
          class="border border-gray-200 p-6 rounded-lg hover:border-teal-500 transition-colors"
        >
          <div class="text-3xl mb-3">üéØ</div>
          <h3 class="text-xl font-semibold mb-2 text-gray-900">Program Management</h3>
          <p class="text-gray-600 mb-2">Impact reports, volunteer coordination, evaluations</p>
          <span class="text-sm text-gray-500">{categoryCounts.programs} prompts</span>
        </a>

        <!-- Events -->
        <a
          href={`${base}category/events`}
          class="border border-gray-200 p-6 rounded-lg hover:border-teal-500 transition-colors"
        >
          <div class="text-3xl mb-3">üéâ</div>
          <h3 class="text-xl font-semibold mb-2 text-gray-900">Event Planning</h3>
          <p class="text-gray-600 mb-2">Invitations, sponsorships, and event marketing</p>
          <span class="text-sm text-gray-500">{categoryCounts.events} prompts</span>
        </a>

        <!-- Board & Leadership -->
        <a
          href={`${base}category/board`}
          class="border border-gray-200 p-6 rounded-lg hover:border-teal-500 transition-colors"
        >
          <div class="text-3xl mb-3">üëî</div>
          <h3 class="text-xl font-semibold mb-2 text-gray-900">Board & Leadership</h3>
          <p class="text-gray-600 mb-2">Board materials, strategic planning, governance</p>
          <span class="text-sm text-gray-500">{categoryCounts.board} prompts</span>
        </a>

        <!-- Operations -->
        <a
          href={`${base}category/operations`}
          class="border border-gray-200 p-6 rounded-lg hover:border-teal-500 transition-colors"
        >
          <div class="text-3xl mb-3">‚öôÔ∏è</div>
          <h3 class="text-xl font-semibold mb-2 text-gray-900">Operations & HR</h3>
          <p class="text-gray-600 mb-2">Policies, job descriptions, and procedures</p>
          <span class="text-sm text-gray-500">{categoryCounts.operations} prompts</span>
        </a>
      </div>
    </div>
  </section>

  <!-- About This Project -->
  <section class="py-16 bg-gray-50 border-t border-gray-200">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-2xl font-bold mb-4 text-gray-900">About This Project</h2>
      <div class="prose prose-lg max-w-none">
        <p class="text-gray-700">
          Nonprofit.ai is an open-source library of AI prompts designed for nonprofit professionals.
          Every prompt is tested with multiple AI models (GPT-5, Claude Sonnet 4.5, Gemini 2.5 Flash)
          and validated with realistic nonprofit scenarios.
        </p>
        <p class="text-gray-700">
          According to the <a href="https://cep.org/news/press-releases/nonprofit-leaders-cite-burnout-as-a-top-concern-in-a-new-study-on-the-state-of-u-s-nonprofits/" target="_blank" rel="noopener" class="text-teal-600 hover:text-teal-700">Center for Effective Philanthropy's 2024 report</a>,
          95% of nonprofit leaders express concern about burnout. This project aims to help nonprofit staff
          save time on writing tasks while maintaining quality and authenticity.
        </p>
        <p class="text-gray-700">
          Created by <a href="https://www.linkedin.com/in/earino/" target="_blank" rel="noopener" class="text-teal-600 hover:text-teal-700">Eduardo Ari√±o de la Rubia</a>
          and <a href="https://www.linkedin.com/in/leigharino/" target="_blank" rel="noopener" class="text-teal-600 hover:text-teal-700">Leigh S. Ari√±o de la Rubia</a>.
          Code licensed under MIT, prompts licensed under CC BY-SA 4.0.
        </p>
        <p>
          <a href={`${base}about`} class="text-teal-600 hover:text-teal-700 font-semibold">Learn more about this project ‚Üí</a>
        </p>
      </div>
    </div>
  </section>
</BaseLayout>
