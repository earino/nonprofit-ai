---
import BaseLayout from '../layouts/BaseLayout.astro';
const base = import.meta.env.BASE_URL;
---

<BaseLayout
  title="Search Prompts"
  description="Search through our collection of AI prompts for nonprofit professionals"
>
  <!-- Pagefind Search Styles -->
  {import.meta.env.PROD && (
    <>
      <link href={`${base}/pagefind/pagefind-ui.css`} rel="stylesheet">
      <style>
        /* Custom Pagefind styling to match site theme */
        .pagefind-ui__search-input {
          background-color: #f9fafb;
          border: 2px solid #e5e7eb;
          border-radius: 0.5rem;
          padding: 0.625rem 1rem;
          font-size: 0.875rem;
          transition: all 0.2s;
        }
        .pagefind-ui__search-input:focus {
          outline: none;
          border-color: #2563eb;
          background-color: white;
          box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }
        .pagefind-ui__result {
          border: 1px solid #e5e7eb;
          border-radius: 0.5rem;
          padding: 1rem;
          margin-bottom: 0.75rem;
          transition: all 0.2s;
        }
        .pagefind-ui__result:hover {
          border-color: #2563eb;
          box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        .pagefind-ui__result-link {
          color: #2563eb;
          font-weight: 600;
        }
        .pagefind-ui__result-link:hover {
          color: #1d4ed8;
        }
        .pagefind-ui__message {
          color: #6b7280;
          font-size: 0.875rem;
        }
        .pagefind-ui__button {
          background-color: #2563eb;
          color: white;
          border-radius: 0.375rem;
          padding: 0.5rem 1rem;
          font-weight: 500;
          transition: background-color 0.2s;
        }
        .pagefind-ui__button:hover {
          background-color: #1d4ed8;
        }
      </style>
    </>
  )}

  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <div class="mb-8">
      <h1 class="text-4xl font-bold text-gray-900 mb-4">Search Prompts</h1>
      <p class="text-lg text-gray-600">Find the perfect AI prompt for your nonprofit needs</p>
    </div>

    <!-- Search Container -->
    <div id="search" class="w-full"></div>

    {!import.meta.env.PROD && (
      <div class="mt-8 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
        <p class="text-yellow-800">
          <strong>Note:</strong> Search functionality only works in production builds.
          Run <code class="bg-yellow-100 px-2 py-1 rounded">npm run build && npm run preview</code> to test search locally.
        </p>
      </div>
    )}
  </div>

  <!-- Pagefind Script -->
  {import.meta.env.PROD && (
    <script is:inline src={`${base}/pagefind/pagefind-ui.js`}></script>
    <script is:inline>
      window.addEventListener('DOMContentLoaded', () => {
        if (typeof PagefindUI !== 'undefined') {
          new PagefindUI({
            element: "#search",
            showSubResults: true,
            showImages: false
          });
        }
      });
    </script>
  )}
</BaseLayout>
